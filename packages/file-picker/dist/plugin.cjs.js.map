{"version":3,"file":"plugin.cjs.js","sources":["esm/web.js","esm/index.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class FilePickerWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.ERROR_PICK_FILE_CANCELED = 'pickFiles canceled.';\n    }\n    async checkPermissions() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async convertHeicToJpeg(_options) {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async pickFiles(options) {\n        const pickedFiles = await this.openFilePicker(options);\n        if (!pickedFiles) {\n            throw new Error(this.ERROR_PICK_FILE_CANCELED);\n        }\n        const result = {\n            files: [],\n        };\n        for (const pickedFile of pickedFiles) {\n            const file = {\n                blob: pickedFile,\n                modifiedAt: pickedFile.lastModified,\n                mimeType: this.getMimeTypeFromUrl(pickedFile),\n                name: this.getNameFromUrl(pickedFile),\n                path: undefined,\n                size: this.getSizeFromUrl(pickedFile),\n            };\n            if (options === null || options === void 0 ? void 0 : options.readData) {\n                file.data = await this.getDataFromFile(pickedFile);\n            }\n            result.files.push(file);\n        }\n        return result;\n    }\n    async pickDirectory() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async pickImages(options) {\n        return this.pickFiles(Object.assign({ types: ['image/*'] }, options));\n    }\n    async pickMedia(options) {\n        return this.pickFiles(Object.assign({ types: ['image/*', 'video/*'] }, options));\n    }\n    async pickVideos(options) {\n        return this.pickFiles(Object.assign({ types: ['video/*'] }, options));\n    }\n    async requestPermissions(_options) {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async openFilePicker(options) {\n        var _a;\n        const accept = ((_a = options === null || options === void 0 ? void 0 : options.types) === null || _a === void 0 ? void 0 : _a.join(',')) || '';\n        const limit = (options === null || options === void 0 ? void 0 : options.limit) === undefined ? 0 : options.limit;\n        return new Promise(resolve => {\n            let onChangeFired = false;\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.accept = accept;\n            input.multiple = limit === 0;\n            input.addEventListener('change', () => {\n                onChangeFired = true;\n                const files = Array.from(input.files || []);\n                resolve(files);\n            }, { once: true });\n            // Workaround to detect when Cancel is selected in the File Selection dialog box.\n            window.addEventListener('focus', async () => {\n                await this.wait(1000);\n                if (onChangeFired) {\n                    return;\n                }\n                resolve(undefined);\n            }, { once: true });\n            input.click();\n        });\n    }\n    async getDataFromFile(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = () => {\n                const result = typeof reader.result === 'string' ? reader.result : '';\n                const splittedResult = result.split('base64,');\n                const base64 = splittedResult[1] || '';\n                resolve(base64);\n            };\n            reader.onerror = error => {\n                reject(error);\n            };\n        });\n    }\n    getNameFromUrl(file) {\n        return file.name;\n    }\n    getMimeTypeFromUrl(file) {\n        return file.type;\n    }\n    getSizeFromUrl(file) {\n        return file.size;\n    }\n    async wait(delayMs) {\n        return new Promise(resolve => setTimeout(resolve, delayMs));\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\n// See https://github.com/capawesome-team/capacitor-plugins/issues/14\nimport * as web from './web';\nconst FilePicker = registerPlugin('FilePicker', {\n    web: () => new web.FilePickerWeb(),\n});\nexport * from './definitions';\nexport { FilePicker };\n//# sourceMappingURL=index.js.map"],"names":["WebPlugin","registerPlugin","web.FilePickerWeb"],"mappings":"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"}